
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>在新机器上使用octopress写文章 - Min's Lounger History</title>
  <meta name="author" content="Mr.Liao">

  
  <meta name="description" content="主要参考来源 安装git
从github上面克隆代码到本机特定目录。 git clone -b source git@github.com:pliaohuimin/pliaohuimin.github.com.git
安装RUBY 1.9.3。记得勾选“Add Ruby executables &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pliaohuimin.github.io/blog/20140805/new-machine-to-octopress">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Min's Lounger History" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Min's Lounger History</a></h1>
  
    <h2>All Life Sucks,all we can do is let it suck less</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:pliaohuimin.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">在新机器上使用octopress写文章</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-05T18:57:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2014</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="http://www.cnblogs.com/oec2003/archive/2013/05/27/3100896.html">主要参考来源</a></p>

<ol>
<li><p>安装git</p></li>
<li><p>从github上面克隆代码到本机特定目录。</p>

<blockquote><p>git clone -b source git@github.com:pliaohuimin/pliaohuimin.github.com.git</p></blockquote></li>
<li><p>安装<a href="http://rubyinstaller.org/downloads/">RUBY</a> 1.9.3。记得勾选“Add Ruby executables to your PATH”，将Ruby的执行路径加入到环境变量中，如果忘记勾选，也可以手动设置</p></li>
<li><p>安装<a href="http://cloud.github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe">DevKit</a>，将其解压到D:/DevKit，有两点需要注意：</p>

<p>  解压目录中没有有中文和空格；</p>

<p>  必须先安装Ruby，而且Ruby需要是RubyInstallser安装。</p>

<p>  解压DevKit后，在命令行输入以下命令来进行安装：</p>

<blockquote><p>d:</p>

<p>cd DevKit</p>

<p>ruby dk.rb init</p>

<p>ruby dk.rb install</p></blockquote></li>
<li><p>安装Python</p></li>
<li><p>安装<a href="https://pypi.python.org/pypi/setuptools">easy_install</a>,</p>

<p> For Windows 7 and earlier, download ez_setup.py using your favorite web browser or other technique and &ldquo;run&rdquo; that file.</p></li>
<li><p>安装pygments</p>

<p> easy_install会安装在Python安装目录的Scripts目录中，例如我的Python目录是C:\Python27，所以需要将C:\Python27\Scripts目录加入到环境变量中才能在命令提示符中使用easy_install命令。</p>

<p> 在命令提示符中输入如下命令就可以安装Pygments了。</p>

<blockquote><p>easy_install pygments</p></blockquote></li>
<li><p>然后需要安装Octopress的依赖项，安装依赖项需要用到Ruby的gem，使用下面的命令可以更换gem的更新源，使用国内的淘宝镜像速度相对快点。</p>

<blockquote><p>gem sources -a <a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a></p>

<p>gem sources -r <a href="http://rubygems.org/">http://rubygems.org/</a></p>

<p>gem sources -l</p></blockquote>

<p> 修改Octopress目录下的Gemfile文件，将第一行的<a href="http://rubygems.org/">http://rubygems.org/</a> 修改为<a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a></p>

<p> 在命令提示符中进入到Octopress目录，输入下面命令进行依赖项的安装</p>

<blockquote><p>gem install bundler</p>

<p>bundle install</p></blockquote></li>
<li><p>在Octopress中添加文章
 使用下面命令可以在Octopress中添加文章</p>

<blockquote><p>rake new_post[&lsquo;post name&rsquo;]</p></blockquote>

<p> 注意，rake new_post[&lsquo;my first octopress blog&rsquo;]中的my first octopress blog 并不是博客标题，而是和生成的文件名以及url地址有关，该名称不支持中文。博客标题可以在生成的markdown文件中修改。生成的markdown文件在octopress/source/_posts目录中。</p>

<p> 编辑markdown文件，将标题可以修改为中文标题，还可以设置分类等信息以及编写正文部分</p>

<p> 每次执行了添加博客的命令，或是修改了现有博客的内容后，都要执行下面命令进行重新生成静态网页</p>

<blockquote><p>rake generate</p></blockquote></li>
<li><p>发布到外网
创建<em>deploy目录,将上一层的.git目录拷贝到</em>deploy下。将主干checkout出来。只需要操作一下，以后可以直接部署。</p>

<blockquote><p>git checkout master</p></blockquote>

下面指令帮你把生成的静态网页更新到主干master上去。

<blockquote><p>rake deploy</p></blockquote></li>
</ol>


<p>done
输入rake preview，可以直接localhost:4000来进行预览</p>

<h2>问题：</h2>

<p>1.执行rake generate时，报错
YAML Exception reading 2012-07-21-8.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-22-13.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-23-20.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-28-35.textile: invalid byte sequence in GBK</p>

<p><a href="http://changfengmingzhi.blog.163.com/blog/static/16710528820131013103511364/">1解决方法</a>：
找到你的Ruby安装目录，如我的是：D:\Ruby193, 在里面找到文件D:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-0.12.0\lib\jekyll\convertible.rb
在该文件中找到下面句子：</p>

<blockquote><p>   def read_yaml(base, name)</p>

<pre><code> self.content = File.read(File.join(base, name))
</code></pre></blockquote>

<p>将它修改为：</p>

<blockquote><p>   def read_yaml(base, name)</p>

<pre><code> self.content = File.read(File.join(base, name),:encoding=&gt;"utf-8")
</code></pre></blockquote>

<p>然后确保所有带中文字符的markdown文件是无BOM的UTF-8格式即可。</p>

<p>2.解决问题1后，执行rake generate时，继续报错
Liquid Exception: incompatible character encodings: UTF-8 and GBK in index.html</p>

<p>将</p>

<pre><code>&gt;export LC_ALL=zh_CN.UTF-8 
&gt;export LANG=zh_CN.UTF-8
</code></pre>

<p>放到~/.bash_profile中，并执行：</p>

<pre><code>&gt;source ~/.bash_profile
</code></pre>

<p>在cmd窗口执行，chcp 65001
然后继续在cmd窗口执行(不可以在bash窗口执行，估计只对当前窗口有效,而bash窗口又无法执行chcp命令）：</p>

<pre><code>&gt;rake generate
</code></pre>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Mr.Liao</span></span>

      








  


<time datetime="2014-08-05T18:57:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  
  
  <a class="bshareDiv" href="http://www.bshare.cn/share">Sharing</a><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=25fcdf85-62f9-400e-b053-627f102edf5a&style=999&img=http%3A%2F%2Fstatic.bshare.cn%2Fimages%2Fbuttons%2Fbox-shareTo-zh.gif&w=147&h=21"></script>
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/20130902/add-share/" title="Previous Post: octopress小工具">&laquo; octopress小工具</a>
      
      
        <a class="basic-alignment right" href="/blog/20140808/new-domain/" title="Next Post: 申请了新域名">申请了新域名 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/20140808/new-domain/">申请了新域名</a>
      </li>
    
      <li class="post">
        <a href="/blog/20140805/new-machine-to-octopress/">在新机器上使用octopress写文章</a>
      </li>
    
      <li class="post">
        <a href="/blog/20130902/add-share/">Octopress小工具</a>
      </li>
    
      <li class="post">
        <a href="/blog/20130902/octopress-archive/">赞一个OCTOPRESS的ARCHIVE展示</a>
      </li>
    
      <li class="post">
        <a href="/blog/20130901/from-wp2octopress/">从wordpress迁移到octopress</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Mr.Liao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'minlh';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://pliaohuimin.github.io/blog/20140805/new-machine-to-octopress/';
        var disqus_url = 'http://pliaohuimin.github.io/blog/20140805/new-machine-to-octopress/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
