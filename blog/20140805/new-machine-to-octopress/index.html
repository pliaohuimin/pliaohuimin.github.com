<p><a href="http://www.cnblogs.com/oec2003/archive/2013/05/27/3100896.html">主要参考来源</a></p>

<ol>
<li><p>安装git</p></li>
<li><p>从github上面克隆代码到本机特定目录。</p></li>
</ol>


<blockquote><p>git clone -b source git@github.com:pliaohuimin/pliaohuimin.github.com.git</p></blockquote>

<ol>
<li><p>安装<a href="http://rubyinstaller.org/downloads/">RUBY</a> 1.9.3。记得勾选“Add Ruby executables to your PATH”，将Ruby的执行路径加入到环境变量中，如果忘记勾选，也可以手动设置</p></li>
<li><p>安装<a href="http://cloud.github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe">DevKit</a>，将其解压到D:/DevKit，有两点需要注意：</p></li>
</ol>


<p> 解压目录中没有有中文和空格；</p>

<p> 必须先安装Ruby，而且Ruby需要是RubyInstallser安装。</p>

<p> 解压DevKit后，在命令行输入以下命令来进行安装：</p>

<blockquote><p>d:
cd DevKit
ruby dk.rb init
ruby dk.rb install</p></blockquote>

<p>5.安装Python</p>

<p>6.安装<a href="https://pypi.python.org/pypi/setuptools">easy_install</a>,</p>

<p>For Windows 7 and earlier, download ez_setup.py using your favorite web browser or other technique and &ldquo;run&rdquo; that file.</p>

<ol>
<li>安装pygments</li>
</ol>


<p>easy_install会安装在Python安装目录的Scripts目录中，例如我的Python目录是C:\Python27，所以需要将C:\Python27\Scripts目录加入到环境变量中才能在命令提示符中使用easy_install命令。</p>

<p>在命令提示符中输入如下命令就可以安装Pygments了。</p>

<p>easy_install pygments</p>

<p>8.然后需要安装Octopress的依赖项，安装依赖项需要用到Ruby的gem，使用下面的命令可以更换gem的更新源，使用国内的淘宝镜像速度相对快点。</p>

<blockquote><p>gem sources -a <a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a>
gem sources -r <a href="http://rubygems.org/">http://rubygems.org/</a>
gem sources -l
修改Octopress目录下的Gemfile文件，将第一行的<a href="http://rubygems.org/">http://rubygems.org/</a> 修改为<a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a></p></blockquote>

<p>在命令提示符中进入到Octopress目录，输入下面命令进行依赖项的安装</p>

<blockquote><p>gem install bundler
bundle install</p></blockquote>

<p>9.在Octopress中添加文章
使用下面命令可以在Octopress中添加文章</p>

<p>注意，rake new_post[&lsquo;my first octopress blog&rsquo;]中的my first octopress blog 并不是博客标题，而是和生成的文件名以及url地址有关，该名称不支持中文。博客标题可以在生成的markdown文件中修改。生成的markdown文件在octopress/source/_posts目录中。</p>

<p>编辑markdown文件，将标题可以修改为中文标题，还可以设置分类等信息以及编写正文部分</p>

<p>每次执行了添加博客的命令，或是修改了现有博客的内容后，都要执行下面命令进行重新生成</p>

<blockquote><p>rake generate</p></blockquote>

<p>10.发布到外网
必须执行一次，以后不需要再执行。</p>

<blockquote><p>rake setup_github_pages</p></blockquote>

<p>This will:</p>

<p>Ask for and store your Github Pages repository url.
Rename the remote pointing to imathis/octopress from &lsquo;origin&rsquo; to &lsquo;octopress&rsquo;
Add your Github Pages repository as the default origin remote.
Switch the active branch from master to source.
Configure your blog&rsquo;s url according to your repository.
Setup a master branch in the _deploy directory for deployment.</p>

<blockquote><p>rake deploy</p></blockquote>

<p>done</p>

<p>输入rake preview，可以直接localhost:4000来进行预览</p>

<h3>问题###：</h3>

<p>1.执行rake generate时，报错
YAML Exception reading 2012-07-21-8.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-22-13.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-23-20.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-28-35.textile: invalid byte sequence in GBK</p>

<p><a href="http://changfengmingzhi.blog.163.com/blog/static/16710528820131013103511364/">1解决方法</a>：
找到你的Ruby安装目录，如我的是：D:\Ruby193, 在里面找到文件D:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-0.12.0\lib\jekyll\convertible.rb
在该文件中找到下面句子：</p>

<blockquote><p>   def read_yaml(base, name)</p>

<pre><code> self.content = File.read(File.join(base, name))
</code></pre></blockquote>

<p>将它修改为：</p>

<blockquote><p>   def read_yaml(base, name)</p>

<pre><code> self.content = File.read(File.join(base, name),:encoding=&gt;"utf-8")
</code></pre></blockquote>

<p>然后确保所有带中文字符的markdown文件是无BOM的UTF-8格式即可。</p>

<p>2.解决问题1后，执行rake generate时，继续报错
Liquid Exception: incompatible character encodings: UTF-8 and GBK in index.html</p>

<p>在cmd窗口执行，chcp 65001
然后继续在cmd窗口执行(不可以在bash窗口执行，估计只对当前窗口有效,而bash窗口又无法执行chcp命令）：</p>

<blockquote><p>rake generate</p></blockquote>

<p>更新和推送</p>

<p>当你要在一台电脑写博客或做更改时，首先更新source仓库。更新master并不是必须的，因为你更改源文件之后还是需要rake generate的</p>

<p>$ cd octopress
$ git pull origin source # update the local source branch
$ cd ./_deploy
$ git pull origin master # update the local master branch</p>

<p>写完博客之后不要忘了推送到remote，下面的步骤在每次更改之后都必须做一遍。</p>

<p>$ rake generate
$ git add .
$ git commit -am “Some comment here.”
$ git push origin source # update the remote source branch
$ rake deploy # update the remote master branch</p>

<p>来源： <a href="http://www.jinjj.org/j1/jishu/1240.html">http://www.jinjj.org/j1/jishu/1240.html</a></p>
