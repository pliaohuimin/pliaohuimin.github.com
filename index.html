
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Min's Lounger</title>
	<meta name="author" content="Mr.Liao">

	
	<meta name="description" content="Sep 9th, 2014 IT Comments 使用Doxygen生成文档 在写代码时，使用doxygen vim插件生成特定格式的说明。 进入项目目录（test为例说明） cd test/ 生成配置文件 Doxygen –g note: 默认生成的配置文件名为 &ldquo; &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Min's Lounger" type="application/atom+xml">
	
	<link rel="canonical" href="http://pliaohuimin.github.io/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("pliaohuimin@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>
<h1><a href="/">Min's Lounger</a></h1>
<p class="subtitle">All Life Sucks,all we can do is let it suck less</p>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/categories/travelling">Travelling</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:pliaohuimin@gmail.com" title="Email">Email</a>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-09-09T14:20:00-07:00" data-updated="true" itemprop="datePublished">Sep 9<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/it/'>IT</a>


</div>
		
			<span class="comments"><a href="/blog/20140909/use-doxygen/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20140909/use-doxygen/" itemprop="url">使用Doxygen生成文档</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h4>在写代码时，使用doxygen vim插件生成特定格式的说明。</h4>

<h4>进入项目目录（test为例说明） cd test/</h4>

<h4>生成配置文件                          Doxygen –g</h4>

<p>note: 默认生成的配置文件名为 &ldquo;Doxyfile&#8221;，也可以采用 &#8220;doxygen -g your-cfg-filename&rdquo; 命令格式指定所生成的配置文件名。如无特殊需要，采用默认的配置文件名即可。</p>

<h4>配置文件的相应设置 ，这里已经有个模板Doxyfile(test文件夹下)，可以根据需要更改相应设置</h4>

<ul>
<li><p>项目名称，将作为于所生成的程序文档首页标题</p>

<blockquote><p>PROJECT_NAME           = Test</p></blockquote></li>
<li><p>文档版本号，可对应于项目版本号，譬如 svn、cvs 所生成的项目版本号</p>

<blockquote><p>PROJECT_NUMBER       = 1.0.0</p></blockquote></li>
<li><p>程序文档输出目录</p>

<blockquote><p>OUTPUT_DIRECTORY    =  doc/</p></blockquote></li>
<li><p>程序文档语言环境</p>

<blockquote><p>OUTPUT_LANGUAGE    = Chinese</p></blockquote></li>
<li><p>如果是制作 C 程序文档，该选项必须设为 YES，否则默认生成 C++ 文档格式</p>

<blockquote><p>OPTIMIZE_OUTPUT_FOR_C  = YES</p></blockquote></li>
<li><p>对于使用 typedef 定义的结构体、枚举、联合等数据类型，只按照 typedef 定义的类型名进行文档化</p>

<blockquote><p>TYPEDEF_HIDES_STRUCT   = YES</p></blockquote></li>
<li><p>在 C++ 程序文档中，该值可以设置为 NO，而在 C 程序文档中，由于 C 语言没有所谓的域/名字空间这样的概念，所以此处设置为 YES</p>

<blockquote><p>HIDE_SCOPE_NAMES        = YES</p></blockquote></li>
<li><p>让 doxygen 静悄悄地为你生成文档，只有出现警告或错误时，才在终端输出提示信息</p>

<blockquote><p>QUIET   = YES</p></blockquote></li>
<li><p>只对头文件中的文档化信息生成程序文档</p>

<blockquote><p>FILE_PATTERNS          = *.h</p></blockquote></li>
<li><p>递归遍历当前目录的子目录，寻找被文档化的程序源文件</p>

<blockquote><p>RECURSIVE              = YES</p></blockquote></li>
<li><p>示例程序目录</p>

<blockquote><p>EXAMPLE_PATH           = example/</p></blockquote></li>
<li><p>示例程序的头文档 (.h 文件) 与实现文档 (.c 文件) 都作为程序文档化对象</p>

<blockquote><p>EXAMPLE_PATTERNS       = <em>.c </em>.h</p></blockquote></li>
<li><p>递归遍历示例程序目录的子目录，寻找被文档化的程序源文件</p>

<blockquote><p>EXAMPLE_RECURSIVE      = YES</p></blockquote></li>
<li><p>允许程序文档中显示本文档化的函数相互调用关系</p>

<blockquote><p>REFERENCED_BY_RELATION = YES
REFERENCES_RELATION    = YES
REFERENCES_LINK_SOURCE = YES</p></blockquote></li>
<li><p>不生成 latex 格式的程序文档</p>

<blockquote><p>GENERATE_LATEX         = NO</p></blockquote></li>
<li><p>在程序文档中允许以图例形式显示函数调用关系，前提是你已经安装了 graphviz 软件包</p>

<blockquote><p>HAVE_DOT               = YES
CALL_GRAPH            = YES
CALLER_GRAPH        = YES</p></blockquote></li>
<li><p>让doxygen从配置文件所在的文件夹开始，递归地搜索所有的子目录及源文件</p>

<blockquote><p>RECURSIVE = YES</p></blockquote></li>
<li><p>在最后生成的文档中，把所有的源代码包含在其中</p>

<blockquote><p>SOURCE BROWSER = YES</p></blockquote></li>
<li><p>这会在HTML文档中，添加一个侧边栏，并以树状结构显示包、类、接口等的关系</p>

<blockquote><p>GENERATE TREEVIEW ＝ ALL</p></blockquote></li>
</ul>


<h4>程序文档生成</h4>

<p>现在开始生成程序文档，将终端的工作目录定位在 test 目录，然后键入：</p>

<blockquote><p>$ doxygen    your-cfg-filename</p></blockquote>

<p>your-cfg-filename 是  Doxygen 配置文件名，如果是使用 &ldquo;doxygen -g&rdquo; 生成的配置文件——Doxyfile，那么可以在终端里仅键入 &ldquo;doxygen&rdquo; 命令即可生成程序文档。<br/>
生成的文档位于 test/doc/html 目录中，使用浏览器打开该目录中的 index.html 文件，即可看到自己的工作成果。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-09-04T16:59:00-07:00" data-updated="true" itemprop="datePublished">Sep 4<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/travelling/'>Travelling</a>


</div>
		
			<span class="comments"><a href="/blog/20140904/20140514-chufa/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20140904/20140514-chufa/" itemprop="url">2014云南之旅&#8211;出发</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h4>关于这趟旅行</h4>

<p>这完全是一次意外之旅。由于上层领导与股东的问题，公司在五月初宣布解散。在打包东西回住处的路上，同事问我有什么打算。突然心血来潮地决定出去旅游。刚好前阵子和还在说想自己出去走走，趁着回家休息，跟他提起想去云南旅游。三天的时间，决定一起出行。在网上定好机票，规划了整体路线，回广州办理一些工作上的手续就出发。</p>

<h4>必带物品</h4>

<p>防晒霜<br/>
保湿用品<br/>
防晒帽子<br/>
外套（昼夜温差大）<br/>
身份证<br/>
学生证（有的话）</p>

<h4>20140514</h4>

<p>早上回公司办理完手续，回去打包。在网上订的云南版LP刚好拿到手。这次旅行来得比较突然，没有做什么功课，全程就只靠这本书了。<br/>
下午五点五十分就从火车东站出发，六点半左右到达机场南站，到深航M窗口办理登机手续，队伍不是很长，十多分钟就办理完。不过这次电脑办不了托运，只能带着包登机，打火机过不了安检，洗发水居然没事。七点十来分到达登记窗口却被告知飞机晚点，九点二十分才登机，汗。登记后，又继续在飞机上发霉，十点出头才真正起飞 。<br/>
十二点左右才到达昆明长水机场。比较顺利地搭上了的，打表96元到达中凰酒店附近舍友的住处。一切打点完毕，已是凌晨两点。明天去东川，得早起，OMG。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-08-11T15:57:00-07:00" data-updated="true" itemprop="datePublished">Aug 11<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20140811/add-profilepic/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20140811/add-profilepic/" itemprop="url">添加博客头像</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>新安装了<a href="https://github.com/shashankmehta/greyshade">greyshade</a>主题。</p>

<p>好奇于其他使用这个主题的其它博客，有头像的展示。一直找不到在哪设置。
原来还有<a href="http://en.gravatar.com/">gravatar</a>这种东西，通过邮箱来显示头像。只要设置好邮箱，并在gravatar服务上注册相应邮箱，上传头像就可以了。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-08-08T14:01:00-07:00" data-updated="true" itemprop="datePublished">Aug 8<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20140808/new-domain/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20140808/new-domain/" itemprop="url">申请了新域名</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>今天下定决心买了域名：<a href="http://www.minlh.com/">http://www.minlh.com/</a></p>

<p>之前用的是.tk免费域名，但总觉得打开页面很卡，不知道跟域名是否有关,还是使用github的原因。
可是打开github时也不觉得特别卡，考虑一下，觉得还是买个.com的域名比较靠谱些，反正也不算太贵。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-08-05T18:57:00-07:00" data-updated="true" itemprop="datePublished">Aug 5<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20140805/new-machine-to-octopress/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20140805/new-machine-to-octopress/" itemprop="url">在新机器上使用octopress写文章</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><a href="http://www.cnblogs.com/oec2003/archive/2013/05/27/3100896.html">主要参考来源</a></p>

<ol>
<li><p>安装git</p></li>
<li><p>从github上面克隆代码到本机特定目录。</p>

<blockquote><p>git clone -b source git@github.com:pliaohuimin/pliaohuimin.github.com.git</p></blockquote></li>
<li><p>安装<a href="http://rubyinstaller.org/downloads/">RUBY</a> 1.9.3。记得勾选“Add Ruby executables to your PATH”，将Ruby的执行路径加入到环境变量中，如果忘记勾选，也可以手动设置</p></li>
<li><p>安装<a href="http://cloud.github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe">DevKit</a>，将其解压到D:/DevKit，有两点需要注意：</p>

<p>  解压目录中没有有中文和空格；</p>

<p>  必须先安装Ruby，而且Ruby需要是RubyInstallser安装。</p>

<p>  解压DevKit后，在命令行输入以下命令来进行安装：</p>

<blockquote><p>d:</p>

<p>cd DevKit</p>

<p>ruby dk.rb init</p>

<p>ruby dk.rb install</p></blockquote></li>
<li><p>安装Python</p></li>
<li><p>安装<a href="https://pypi.python.org/pypi/setuptools">easy_install</a>,</p>

<p> For Windows 7 and earlier, download ez_setup.py using your favorite web browser or other technique and &ldquo;run&rdquo; that file.</p></li>
<li><p>安装pygments</p>

<p> easy_install会安装在Python安装目录的Scripts目录中，例如我的Python目录是C:\Python27，所以需要将C:\Python27\Scripts目录加入到环境变量中才能在命令提示符中使用easy_install命令。</p>

<p> 在命令提示符中输入如下命令就可以安装Pygments了。</p>

<blockquote><p>easy_install pygments</p></blockquote></li>
<li><p>然后需要安装Octopress的依赖项，安装依赖项需要用到Ruby的gem，使用下面的命令可以更换gem的更新源，使用国内的淘宝镜像速度相对快点。</p>

<blockquote><p>gem sources -a <a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a></p>

<p>gem sources -r <a href="http://rubygems.org/">http://rubygems.org/</a></p>

<p>gem sources -l</p></blockquote>

<p> 修改Octopress目录下的Gemfile文件，将第一行的<a href="http://rubygems.org/">http://rubygems.org/</a> 修改为<a href="http://ruby.taobao.org/">http://ruby.taobao.org/</a></p>

<p> 在命令提示符中进入到Octopress目录，输入下面命令进行依赖项的安装</p>

<blockquote><p>gem install bundler</p>

<p>bundle install</p></blockquote></li>
<li><p>在Octopress中添加文章
 使用下面命令可以在Octopress中添加文章</p>

<blockquote><p>rake new_post[&lsquo;post name&rsquo;]</p></blockquote>

<p> 注意，rake new_post[&lsquo;my first octopress blog&rsquo;]中的my first octopress blog 并不是博客标题，而是和生成的文件名以及url地址有关，该名称不支持中文。博客标题可以在生成的markdown文件中修改。生成的markdown文件在octopress/source/_posts目录中。</p>

<p> 编辑markdown文件，将标题可以修改为中文标题，还可以设置分类等信息以及编写正文部分</p>

<p> 每次执行了添加博客的命令，或是修改了现有博客的内容后，都要执行下面命令进行重新生成静态网页</p>

<blockquote><p>rake generate</p></blockquote></li>
<li><p>发布到外网
创建<em>deploy目录,将上一层的.git目录拷贝到</em>deploy下。将主干checkout出来。只需要操作一下，以后可以直接部署。</p>

<blockquote><p>git checkout master</p></blockquote>

下面指令帮你把生成的静态网页更新到主干master上去。

<blockquote><p>rake deploy</p></blockquote></li>
</ol>


<p>done
输入rake preview，可以直接localhost:4000来进行预览</p>

<h2>问题：</h2>

<p>1.执行rake generate时，报错
YAML Exception reading 2012-07-21-8.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-22-13.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-23-20.textile: invalid byte sequence in GBK
YAML Exception reading 2012-07-28-35.textile: invalid byte sequence in GBK</p>

<p><a href="http://changfengmingzhi.blog.163.com/blog/static/16710528820131013103511364/">1解决方法</a>：
找到你的Ruby安装目录，如我的是：D:\Ruby193, 在里面找到文件D:\Ruby193\lib\ruby\gems\1.9.1\gems\jekyll-0.12.0\lib\jekyll\convertible.rb
在该文件中找到下面句子：</p>

<blockquote><p>   def read_yaml(base, name)</p>

<pre><code> self.content = File.read(File.join(base, name))
</code></pre></blockquote>

<p>将它修改为：</p>

<blockquote><p>   def read_yaml(base, name)</p>

<pre><code> self.content = File.read(File.join(base, name),:encoding=&gt;"utf-8")
</code></pre></blockquote>

<p>然后确保所有带中文字符的markdown文件是无BOM的UTF-8格式即可。</p>

<p>2.解决问题1后，执行rake generate时，继续报错
Liquid Exception: incompatible character encodings: UTF-8 and GBK in index.html</p>

<p>将</p>

<pre><code>&gt;export LC_ALL=zh_CN.UTF-8 
&gt;export LANG=zh_CN.UTF-8
</code></pre>

<p>放到~/.bash_profile中，并执行：</p>

<pre><code>&gt;source ~/.bash_profile
</code></pre>

<p>在cmd窗口执行，chcp 65001
然后继续在cmd窗口执行(不可以在bash窗口执行，估计只对当前窗口有效,而bash窗口又无法执行chcp命令）：</p>

<pre><code>&gt;rake generate
</code></pre>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-09-02T21:00:00-07:00" data-updated="true" itemprop="datePublished">Sep 2<span>nd</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20130902/add-share/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20130902/add-share/" itemprop="url">Octopress小工具</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>添加一键共享</h3>

<p>我目前使用的是bshare。<br/>
在<em>config.yml中增加bshare: true。在“source/</em>includes/post”下的sharing.html中增加如下代码：</p>

<pre><code>&lt;a class="bshareDiv" href="http://www.bshare.cn/share"&gt;Sharing&lt;/a&gt;&lt;script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=25fcdf85-62f9-400e-b053-627f102edf5a&amp;style=999&amp;img=http%3A%2F%2Fstatic.bshare.cn%2Fimages%2Fbuttons%2Fbox-shareTo-zh.gif&amp;w=147&amp;h=21"&gt;&lt;/script&gt;
</code></pre>

<p>上述的代码由bshare产生，可以自己选择所需的外观。这样，在每一篇文章的最下方会出现一个分享的小工具。</p>

<h3>添加DISQUC评论</h3>

<p>首先需要在Disqus注册一个账号，登录后添加站点信息，将填写的short_name写到<em>config.yml中，并将</em>config.yml中的disqus_show_comment_count设置为true.如下：</p>

<pre><code># Disqus Comments
disqus_short_name: liao   # liao为添加站点信息时的Site Shortname
disqus_show_comment_count: true
</code></pre>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-09-02T16:05:00-07:00" data-updated="true" itemprop="datePublished">Sep 2<span>nd</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20130902/octopress-archive/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20130902/octopress-archive/" itemprop="url">赞一个OCTOPRESS的ARCHIVE展示</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>感觉挺好的，对于之前发布过的文章，简洁，一目了然。<br/>
之前还在琢磨着要不要给这些文章分目录，现在看来要重新考虑一下分目录的必要性。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-09-01T03:54:00-07:00" data-updated="true" itemprop="datePublished">Sep 1<span>st</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20130901/from-wp2octopress/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20130901/from-wp2octopress/" itemprop="url">从wordpress迁移到octopress</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>为什么要迁移：</h2>

<blockquote><p>并不是觉得wordpress不好用，而是由于之前一直在使用的noads.biz服务器开始在我的个人网站上放广告，而我找不到其它更好的劫持php,mysql的免费服务器，所以决定使用octopress，可以直接把内容放在github上。</p></blockquote>

<h2>迁移步骤：</h2>

<h3>准备工作</h3>

<ul>
<li>step 1:在github上注册一个用户。并用该用户创建一个“username.github.com“的项目库，其中username为你在github注册的用户</li>
<li>step 2:在LINUX上安装好GIT</li>
<li>step 3:在LINUX上安装好ruby
curl -L <a href="https://get.rvm.io">https://get.rvm.io</a> | bash -s stable &mdash;ruby
source /home/liao/.rvm/scripts/rvm
如果执行下列命令报错，请重新打开终端，并再次执行source /home/liao/.rvm/scripts/rvm</li>
</ul>


<h3>安装好OCTOPRESS</h3>

<ul>
<li>step 4:克隆octopress项目
git clone git://github.com/imathis/octopress.git</li>
<li>step 5:安装OCTOPRESS
gem install bundler
bundle install</li>
<li>step 6:安装主题
rake install</li>
</ul>


<h3>部署到GITHUB</h3>

<ul>
<li>step 7:rake setup_github_pages
期间会要求你输入项目地址，请输入:git@github.com:username.github.com
期中username为你在github的用户名。</li>
<li>step 8:生成代码
rake generate</li>
<li>step 9:部署到github上
rake deploy
期间可能会报错，可以尝试跳转到_deploy目录下，运行git pull origin master。再回到上一层再次执行rake deploy</li>
<li>step 10:备份相关文件到source分支
git add
git commit -m &lsquo;your message
git push origin source
如果报错，可以尝试先执行下列命令，再一次执行上面的命令。
git branch source
git checkout source</li>
</ul>


<h3>关于域名的绑定</h3>

<p>如果是使用一级域名，在source目录下添加CNAME文件，并在里面添加你的域名，如www.minlh.tk<br/>
然后在你的域名服务商那里添加一行A RECORD，IP地址为207.97.227.245</p>

<h3>关于文章的迁移</h3>

<p>使用wordpress后台管理工具，将数据导出成xml格式
安装必要工具：
gem install hpricot
gem install ya2yaml
使用XDITE提供的工具
<a href="https://gist.github.com/xdite/1273518">https://gist.github.com/xdite/1273518</a></p>

<p>执行直接執行 ruby xxx.rb xxx.xml 名
st目录，将该目录下的所有文件拷贝到source/_post目录下即可。</p>

<h3>关于文章中图片的迁移</h3>

<p>将wp-content/uploads目录下载，上传到source目录即可。
图片链接出现时border=0 hspace=0 alt=&ldquo;&rdquo; align=baseline，会导致生成的blogs双引号自动转换成&#8220;字样，需要将这些去掉，图片才能正常显示。</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-08-30T17:28:00-07:00" data-updated="true" itemprop="datePublished">Aug 30<span>th</span>, 2013</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/webbuilding/'>WebBuilding</a>


</div>
		
			<span class="comments"><a href="/blog/20130830/kai-shi-octopress/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/20130830/kai-shi-octopress/" itemprop="url">开始OCTOPRESS</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><a href="http://www.flickr.com/photos/minlh/9631485119/" title="hua by liaosihao, on Flickr"><img src="http://farm4.staticflickr.com/3721/9631485119_3edb45c7c5.jpg" width="377" height="500" alt="hua"></a></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2013-08-20T00:00:00-07:00" data-updated="true" itemprop="datePublished">Aug 20<span>th</span>, 2013</time></div>
		<div class="tags">

</div>
		
			<span class="comments"><a href="/blogs/583#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blogs/583" itemprop="url">初识REDIS</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div>上一个游戏项目使用了MEMCACHED作缓存和MYSQL作持久化的数据结构。</div><div>早在上个项目后期，主线就一直想把MEMCACHED替换成REDIS，至于是出于什么样子的考虑，由于个人层次原因，不是很明白。后来由于时间的关系，这件事情也就不了了之了。</div><div>到了这个项目，新的游戏也接近上线，主程还是对这个REDIS念念不忘。这个替换的任务落到了我头上，也刚好让我对REDIS有点皮毛的认识。下面先说说为什么要替换掉MEMCACHED：</div><div>首先，REDIS提供多种数据结构，大部份与STL接口，如SET，STRING，LIST等。这次项目的使用到的HASH结构。&nbsp;&nbsp;&nbsp;</div><div>使用这种结构，可以解决上个项目中，对于每个玩家只有一行记录的表，无法一次性整表读取的问题。使用REDIS 的HASH结构，将数据库名称与表名作为KEY，玩家唯一标识字段设定为FIELD，再将玩家数据作为VALUE存入。通过HVALS即可获取整表记录。</div><div>另外，之前使用MEMCACHED，还得自己维护多一个元数据在缓存中，以使业务获取KEY的信息。而通过REDIS的HASH，简单的HVALS即可达到目的。</div><div>以上就是本人对REDIS皮毛上的认识。本质上更多的区别，还有待深入了解。</div><div>再说说这几天使用的情况：</div><div>此次服务器版本使用的是v2.6。客户端API采用了HIREDIS的C接口。之前有考虑使用C++接口，给主程否了，说不稳定。作为小白，只有乖乖听话，改用HIREDIS。</div><div>起初的版本比较简单，&nbsp;&nbsp;没有考虑到连接REDIS服务器失败后，后续接口的异常情况。在经过无数次DUMP机之后，发现罪魁祸首就是由于连接服务器失败，redisContext中的o_buf并没有初始化，而在执行redisCommand时，需要用到o_buf，导致内存越界。后来将redisCommand进行封装，每次执行里先检查redisContext指针。问题算是解决了，然后，引入了新的问题。</div><div>对redisCommand进行封装时，使用了va_list来处理变长参数，又直接使用redisCommand来执行，还是DUMP机，看了源代码，发现用错函数了，应该使用redisvCommand，替换后，终于不当机了。</div><div>接着是处理各种断连情况。</div><div>第一种情况是，程序启动时，REDIS服务没有启动，这时连接失败。那么在以后每次执行指令时，对于redisContext指针为空的情况，需要加入重连机制，保证当REDIS服务启动后，程序主动进行连接，避免程序需要重启，REDIS机制才会生效的问题。</div><div>第二种情况是，程序启动时，REDIS服务也启动。但是在运行过程中，REDIS服务关闭了。这时，程序也需要对REDIS服务提供重连机制，同样是为了避免一旦REDIS服务器关闭后再启动，也无法使用的问题。</div><div>经测试，处于第二种情况时，REDIS服务关闭后，连接断开。执行redisCommand会返回空指针，由于，程序在每次执行完后，都会对指针进行判断，一旦为空，就会尝试重连。</div><div>在实际测试中，发现REDIS默认有持久化的机制，基于这个项目，并不需要持久化机制，除了增加开销，还是导致数据异常。尝试将配置文件的save配置都注释了，发现还是会有持久会。如何关闭，还有待观察。</div><div>另外一个问题就是，玩家在线，将REDIS服务器关了再重启，这时REDIS缓存为空。之后如果玩家作了某些操作，在从数据库加载数据到缓存前，触发了HSET操作，会导致之后都不会从数据库中加载数据，同样会造成数据异常。解决方法是，在每次SET之前，都会查询当前缓存中，有没有相应KEY的信息，如果没有，先从数据库加载后再执行SET操作。</div><p><br /><br /><div><a title="来自为知笔记(Wiz)" href="http://www.wiz.cn/i/f962040b">来自为知笔记(Wiz)</a></div><br /><br /></p>
		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Mr.Liao


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'minlh';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










</body>
</html>
